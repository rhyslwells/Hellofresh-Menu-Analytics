<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Weekly HTML Reports</title>
    <style>
      * { box-sizing: border-box }
      body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 1rem 2rem; color: #111; margin: 0 }
      header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem }
      h1 { margin: 0; font-size: 1.5rem }
      .back-link { color: #0066cc; text-decoration: none; font-size: 0.95rem }
      .back-link:hover { text-decoration: underline }
      .controls { display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center; margin-bottom: 1rem }
      button { padding: 0.5rem 1rem; background: #0066cc; color: white; border: none; cursor: pointer; border-radius: 4px; font-size: 0.95rem }
      button:hover { background: #0052a3 }
      button:disabled { background: #ccc; cursor: not-allowed }
      .pos { color: #666; font-size: 0.9rem; padding: 0 0.5rem }
      .viewer-wrapper { margin: 1rem 0; border: 1px solid #ddd; border-radius: 4px; background: #f9f9f9 }
      iframe { width: 100%; height: 60vh; border: none; display: block }
      .file-list { margin-top: 1.5rem; padding: 1rem; background: #f9f9f9; border-radius: 4px }
      .file-list h2 { margin: 0 0 0.5rem 0; font-size: 1rem; color: #333 }
      .file-list ul { margin: 0; padding-left: 1.5rem; line-height: 1.8 }
      .file-list a { color: #0066cc; text-decoration: none; font-size: 0.95rem }
      .file-list a:hover { text-decoration: underline }
      .current-marker { color: #666; font-weight: bold; margin-left: 0.3rem }
      @media (max-width: 600px) {
        body { padding: 1rem }
        h1 { font-size: 1.2rem }
        header { flex-direction: column; align-items: flex-start }
        iframe { height: 50vh }
        .controls { flex-direction: column; width: 100% }
        button { width: 100% }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Weekly HTML Reports</h1>
      <a href="../" class="back-link">← Back to Docs</a>
    </header>

    <div class="controls">
      <button id="prev" disabled>◀ Prev</button>
      <button id="next" disabled>Next ▶</button>
      <span class="pos" id="pos"></span>
    </div>

    <div class="viewer-wrapper">
      <iframe id="viewer" title="report viewer"></iframe>
    </div>

    <div class="file-list">
      <h2>All Reports</h2>
      <ul id="fileList"></ul>
    </div>

    <script>
      // Files in this folder, in the desired order
      const files = [
        '2026-01-01-report.html',
        '2026-01-08-report.html'
      ];

      let idx = 0;
      const viewer = document.getElementById('viewer');
      const pos = document.getElementById('pos');
      const fileList = document.getElementById('fileList');
      const prevBtn = document.getElementById('prev');
      const nextBtn = document.getElementById('next');

      function renderList() {
        fileList.innerHTML = '';
        files.forEach((f, i) => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = f;
          a.textContent = f;
          if (i === idx) {
            a.style.fontWeight = 'bold';
            a.style.color = '#333';
            const marker = document.createElement('span');
            marker.className = 'current-marker';
            marker.textContent = ' ← viewing';
            a.appendChild(marker);
          }
          a.target = '_blank';
          li.appendChild(a);
          fileList.appendChild(li);
        });
      }

      function updateButtons() {
        prevBtn.disabled = idx === 0;
        nextBtn.disabled = idx === files.length - 1;
      }

      function loadIndex(i) {
        if (i < 0) i = 0;
        if (i >= files.length) i = files.length - 1;
        idx = i;
        viewer.src = files[idx];
        pos.textContent = `${idx + 1} of ${files.length}`;
        renderList();
        updateButtons();
      }

      prevBtn.addEventListener('click', () => loadIndex(idx - 1));
      nextBtn.addEventListener('click', () => loadIndex(idx + 1));
      openNewBtn.addEventListener('click', () => window.open(files
      // Initialize
      if (files.length === 0) {
        fileList.innerHTML = '<li style="color: #999">No files listed. Edit the <code>files</code> array in this page.</li>';
        viewer.src = 'about:blank';
      } else {
        renderList();
        loadIndex(0);
      }
    </script>
  </body>
</html>
